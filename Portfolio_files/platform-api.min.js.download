!function(e,n){if("object"==typeof exports&&"object"==typeof module)module.exports=n(require("lodash"));else if("function"==typeof define&&define.amd)define(["lodash"],n);else{var t="object"==typeof exports?n(require("lodash")):n(e._);for(var o in t)("object"==typeof exports?exports:e)[o]=t[o]}}(window,(function(e){return function(e){var n={};function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(o,r,function(n){return e[n]}.bind(null,r));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=4)}([function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.promiseApplied=function(e,n){return new Promise((function(t){e.waitForChangesApplied((function(){return t(n)}))}))},n.runInContext=function(e,n,t){return n.runInContext(e,t)}},function(n,t){n.exports=e},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.navigateTo=void 0;var o,r=t(1),i=(o=r)&&o.__esModule?o:{default:o},a=t(0);n.navigateTo=function(e,n,t,o,r){var p=o.pageRef,u=o.pageLink,f=i.default.get(p,"id")||u;if(f)return(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.pages.navigateTo(f)})),(0,a.promiseApplied)(e,r)}},,function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.errors=n.account=n.accessibility=n.responsiveLayout=n.mobile=n.vfs=n.tpa=n.theme=n.fonts=n.siteMembers=n.siteSegments=n.routers=n.pagesGroup=n.pages=n.menu=n.language=n.info=n.history=n.controllers=n.components=n.application=n.save=n.waitForChangesApplied=void 0;var o=x(t(5)),r=x(t(6)),i=x(t(8)),a=x(t(9)),p=x(t(10)),u=x(t(11)),f=x(t(12)),s=x(t(13)),c=x(t(14)),d=x(t(16)),l=x(t(17)),g=x(t(18)),m=x(t(19)),I=x(t(20)),v=x(t(21)),y=x(t(22)),C=x(t(23)),D=x(t(24)),P=x(t(25)),R=x(t(26)),h=x(t(27));function x(e){return e&&e.__esModule?e:{default:e}}n.waitForChangesApplied=function(e,n){return e.waitForChangesApplied(n)},n.save=function(e){return new Promise((function(n,t){e.save((function(){return n()}),(function(e){return t(e)}))}))},n.application=o.default,n.components=r.default,n.controllers=i.default,n.history=p.default,n.info=u.default,n.language=f.default,n.menu=s.default,n.pages=c.default,n.pagesGroup=d.default,n.routers=l.default,n.siteSegments=g.default,n.siteMembers=m.default,n.fonts=a.default,n.theme=I.default,n.tpa=v.default,n.vfs=y.default,n.mobile=C.default,n.responsiveLayout=D.default,n.accessibility=P.default,n.account=R.default,n.errors=h.default},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,r=t(1),i=(o=r)&&o.__esModule?o:{default:o},a=t(0);n.default={install:function(e,n,t,o){var r=o.appDefinitionId,p=o.originInfo,u=o.editorType;return new Promise((function(t,o){if(r){var f={appDefinitionId:i.default.get(n,"appDefinitionId")},s=p?i.default.assign({},p,f):f;(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.platform.provision(r,{origin:{initiator:"APP",type:u,info:s}}).then(t,o)}))}else o(new Error("options must contain appDefinitionId"))}))},registerToCustomEvents:function(e,n,t,o){var r=o.eventTypes;return(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.platform.registerAppToCustomEvents(n.applicationId,r)}))},appStudioWidgets:{changeVariation:function(e,n,t,o){var r=o.componentRef,i=o.variationId;return new Promise((function(t){(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.appStudioWidgets.changeVariation(r,i,t)}))}))},addWidget:function(e,n,t,o){var r=o.containerRef,i=o.widgetId,p=o.variationId,u=o.layout,f=o.installationType;return new Promise((function(t,o){(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.appStudioWidgets.addWidget(n.appDefinitionId,i,{containerRef:r,variationId:p,layout:u,installationType:f,onSuccess:t,onError:o})}))}))}},sessionState:{update:function(e,n,t,o){var r=o.stateMap;return(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.platform.sessionState.update(r)})),(0,a.promiseApplied)(e)}},livePreview:{refresh:function(e,n,t,o){var r=o.source,i=o.shouldFetchData;return e.platform.livePreview.refresh({apps:[n.appDefinitionId],source:r||"EditorSDK",shouldFetchData:i})}}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=a(t(1)),r=t(0),i=a(t(7));function a(e){return e&&e.__esModule?e:{default:e}}n.default={add:function(e,n,t){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=i.componentDefinition,p=i.pageRef,u=i.customId;return new Promise((function(t,i){o.default.has(a,"componentType")||i(new Error("componentDefinition must contain componentType"));var f=e.components.buildDefaultComponentStructure(a.componentType);o.default.merge(f,a),t((0,r.runInContext)(n.appDefinitionId,e,(function(){return e.components.add(p,f,u)})))}))},remove:function(e,n,t,o){var i=o.componentRef;e.viewMode.get()===e.viewMode.VIEW_MODES.MOBILE?(0,r.runInContext)(n.appDefinitionId,e,(function(){return e.mobile.hiddenComponents.hide(i)})):(0,r.runInContext)(n.appDefinitionId,e,(function(){return e.components.remove(i)}))},get:function(e,n,t,r){var i=r.componentRefs,a=r.properties,p=void 0===a?[]:a,u=o.default.compact(o.default.isArray(i)?i:[i]);return o.default.transform(u,(function(t,r){var i={componentRef:r},a=!p.includes("components"),u=e.components.serialize(r,null,a);if(o.default.assign(i,o.default.pick(u,p)),o.default.includes(p,"sdkType")&&(i.sdkType=e.wixCode.getCompSdkType(r)),o.default.includes(p,"connections")&&(i.connections=e.platform.controllers.connections.get(r)),o.default.includes(p,"style")&&(i.style=e.components.style.get(r)),o.default.includes(p,"role")){var f=e.platform.controllers.connections.get(r),s=o.default.find(f,(function(t){return o.default.get(e.components.data.get(t.controllerRef),"applicationId")===n.applicationId}));i.role=o.default.get(s,"role")}t.push(i)}),[])},serialize:function(e,n,t,o){var r=o.componentRef,i=o.maintainIdentifiers,a=void 0!==i&&i;return e.components.serialize(r,null,!1,a)},getAllComponents:function(e){return e.components.getAllComponents()},getPage:function(e,n,t,o){var r=o.componentRef;return e.components.getPage(r)},getById:function(e,n,t,o){var r=o.id;return e.components.get.byId(r)},getChildren:function(e,n,t,o){var r=o.componentRef,i=o.recursive,a=void 0!==i&&i;return e.components.getChildren(r,a)},getAncestors:function(e,n,t,o){var r=o.componentRef;return e.components.getAncestors(r)},getType:function(e,n,t,o){var r=o.componentRef;return e.components.getType(r)},behaviors:{getRuntimeState:function(e,n,t,o){var r=o.componentRef;return e.components.behaviors.getRuntimeState(r)},execute:function(e,n,t,o){var i=o.componentRef,a=o.behaviorName,p=o.behaviorParams;return(0,r.runInContext)(n.appDefinitionId,e,(function(){return e.components.behaviors.execute(i,a,p)})),(0,r.promiseApplied)(e)}},properties:{get:function(e,n,t,o){var r=o.componentRef;return e.components.properties.get(r)},update:function(e,n,t,o){var i=o.componentRef,a=o.props;(0,r.runInContext)(n.appDefinitionId,e,(function(){return e.components.properties.update(i,a)}))}},data:{get:function(e,n,t,o){var r=o.componentRef;return e.components.data.get(r)},update:function(e,n,t,o){var i=o.componentRef,a=o.data;(0,r.runInContext)(n.appDefinitionId,e,(function(){return e.components.data.update(i,a)}))}},layout:{get:function(e,n,t,o){var r=o.componentRef;return e.components.layout.get(r)},update:function(e,n,t,o){var i=o.componentRef,a=o.layout;(0,r.runInContext)(n.appDefinitionId,e,(function(){return e.components.layout.update(i,a)}))}},style:{get:function(e,n,t,o){var r=o.componentRef;return e.components.style.get(r)},update:function(e,n,t,o){var i=o.componentRef,a=o.style;(0,r.runInContext)(n.appDefinitionId,e,(function(){return e.components.style.setCustom(i,null,a)}))},updateFull:function(e,n,t,o){var i=o.componentRef,a=o.style;(0,r.runInContext)(n.appDefinitionId,e,(function(){return e.components.style.update(i,a)}))}},design:{get:function(e,n,t,o){var r=o.componentRef;return e.components.design.get(r)},update:function(e,n,t,o){var i=o.componentRef,a=o.designItem,p=o.retainCharas;(0,r.runInContext)(n.appDefinitionId,e,(function(){return e.components.design.update(i,a,p)}))}},modes:{showComponentOnlyOnPagesGroup:function(e,n,t,o){var i=o.componentPointer,a=o.componentRef,p=void 0===a?i:a,u=o.pagesGroupPointer;(0,r.runInContext)(n.appDefinitionId,e,(function(){return e.components.modes.showComponentOnlyOnPagesGroup(p,u)}))},activateComponentMode:function(e,n,t,o){var i=o.componentRef,a=o.modeId;(0,r.runInContext)(n.appDefinitionId,e,(function(){return e.components.modes.activateComponentMode(i,a)}))},applyCurrentToAllModes:function(e,n,t,o){var i=o.componentRef;(0,r.runInContext)(n.appDefinitionId,e,(function(){return e.components.modes.applyCurrentToAllModes(i)}))},getModes:function(e,n,t,o){var r=o.componentRef;return e.components.modes.getModes(r)}},arrangement:{moveToIndex:function(e,n,t,o){var i=o.componentRef,a=o.index;return(0,r.runInContext)(n.appDefinitionId,e,(function(){return e.components.arrangement.moveToIndex(i,a)}))}},refComponents:i.default}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,r=t(1),i=(o=r)&&o.__esModule?o:{default:o},a=t(0);n.default={removeAllOverrides:function(e,n,t,o){var r=o.componentRef;return new Promise((function(t,o){"wysiwyg.viewer.components.RefComponent"!==e.components.getType(r)&&o("This method remove overrides only for a refComponent."),e.components.data.get(r).appDefinitionId!==n.appDefinitionId&&o("The component with id '"+r.id+"' doesn't belong to this app.");try{(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.components.refComponents.removeAllOverrides(r)}))}catch(e){o(e)}t()}))},openReferredComponent:function(e,n,t,o){var r=o.componentRef;return new Promise((function(t,o){"wysiwyg.viewer.components.RefComponent"!==e.components.getType(r)&&o("This method only opens a refComponent."),e.components.data.get(r).appDefinitionId!==n.appDefinitionId&&o("The component with id '"+r.id+"' doesn't belong to this app.");try{(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.components.refComponents.openReferredComponent(r)}))}catch(e){o(e)}t()}))},closeWidgetToReferredComponent:function(e,n,t,o){var r=o.componentRef;return new Promise((function(t,o){"platform.components.AppWidget"!==e.components.getType(r)&&o("This method closes only appWidget"),e.components.data.get(r).appDefinitionId!==n.appDefinitionId&&o("The component with id '"+r.id+"' doesn't belong to this app.");try{t((0,a.runInContext)(n.appDefinitionId,e,(function(){return e.components.refComponents.closeWidgetToReferredComponent(r)})))}catch(e){o(e)}}))},getAllAppRefComponents:function(e,n){return e.components.getAllComponentsFromFull().filter((function(t){var o=e.components.data.get(t)||{};return"WidgetRef"===o.type&&o.appDefinitionId===n.appDefinitionId}))},isRefComponentCollapsed:function(e,n,t,o){var r=o.componentRef;return"COLLAPSED"===i.default.get(e.components.properties.get(r),"ghost")},getCollapsedRefComponents:function(e,n,t,o){var r=o.componentRef;return new Promise((function(t,o){"wysiwyg.viewer.components.RefComponent"!==e.components.getType(r)&&o("This method get collapsed components only for a refComponent."),e.components.data.get(r).appDefinitionId!==n.appDefinitionId&&o("The component with id '"+r.id+"' doesn't belong to this app.");try{var a=e.components.refComponents.getAllGhostRefComponentsPrimaryConnection(r);t(i.default.map(a,(function(n,t){return{componentRef:e.components.get.byId(t),role:n.role}})))}catch(e){o(e)}}))},collapseReferredComponent:function(e,n,t,o){var r=o.componentRef;return new Promise((function(t,o){if(!e.components.refComponents.isReferredComponent(r))return o("The component with id '"+r.id+"' isn't a referred component.");var i=e.components.refComponents.getRefHostCompPointer(r);if(e.components.data.get(i).appDefinitionId!==n.appDefinitionId)return o("The component with id '"+r.id+"' doesn't belong to this app.");try{(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.components.remove(r)}))}catch(e){return o(e)}t()}))},getTemplateComponent:function(e,n,t,o){var r=o.componentRef;return e.components.refComponents.getTemplateCompPointer(r)},expandReferredComponent:function(e,n,t,o){var r=o.componentRef;return new Promise((function(t,o){if(!e.components.refComponents.isReferredComponent(r))return o("The component with id '"+r.id+"' isn't a referred component.");var i=e.components.refComponents.getRefHostCompPointer(r);if(e.components.data.get(i).appDefinitionId!==n.appDefinitionId)return o("The component with id '"+r.id+"' doesn't belong to this app.");try{(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.components.refComponents.unGhostifyComponent(r)}))}catch(e){return o(e)}t()}))}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,r=t(1),i=(o=r)&&o.__esModule?o:{default:o},a=t(0);var p={SITE_HEADER:!0,SITE_FOOTER:!0};var u=function(e,n){return(0,i.default)(n).thru(e.components.getAncestors).reverse().tail().map("id").head()};function f(e,n,t){var o=t?t.id:null;return e.components.getAllComponents(o,(function(t){return!(o=e.components.getType(t),"platform.components.AppController"!==o&&"platform.components.AppWidget"!==o||e.components.data.get(t).applicationId!==n.appDefinitionId);var o}))}function s(e,n,t){var o=f(e,n,t),r=(0,i.default)(o).map(e.components.refComponents.getTemplateCompPointer).compact().keyBy("id").value();return(0,i.default)(o).reject((function(e){var n=e.id;return r[n]})).map((function(e){return{controllerRef:e}})).value()}function c(e,n,t,o){var r=o.controllerRef;return e.platform.controllers.connections.getControllerConnections(r)}n.default={listControllers:function(e,n,t){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=o.pageRef,i=void 0===r?e.pages.getFocusedPage():r;return s(e,n,i)},listAllControllers:function(e,n){return s(e,n)},listConnectableControllers:function(e,n,t,o){var r=o.componentRef,a=e.components.getPage(r),s=f(e,n,a),c=u(e,r);return(0,i.default)(s).filter((function(n){return function(e,n,t,o){var r=e.components.getPage(o);if("masterPage"===r.id){var i=u(e,o);return!(i&&!p[i])||t===i}return n===r.id}(e,a.id,c,n)})).filter((function(n){return function(e,n,t){return"platform.components.AppWidget"!==e.components.getType(t)||e.components.isDescendantOfComp(n,t)}(e,r,n)})).map((function(e){return{controllerRef:e}})).value()},getControllerConnections:c,listControllerConnections:c,listConnections:function(e,n,t,o){var r=o.componentRef,a=e.platform.controllers.connections.get(r);return i.default.reject(a,{type:"WixCodeConnectionItem"})},listConnectedComponents:function(e,n,t,o){var r=o.controllerRef;return e.platform.controllers.connections.getConnectedComponents(r)},connect:function(e,n,t,o){var r=o.connectToRef,i=o.controllerRef,p=o.role,u=o.connectionConfig,f=o.isPrimary;return(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.platform.controllers.connections.connect(r,i,p,u,f)})),{connectToRef:r,controllerRef:i,role:p}},disconnect:function(e,n,t,o){var r=o.connectToRef,i=o.controllerRef,p=o.role;return(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.platform.controllers.connections.disconnect(r,i,p)}))},getData:function(e,n,t,o){var r=o.controllerRef,a=e.platform.controllers.settings.get(r);return{type:i.default.get(e.components.data.get(r),"controllerType"),config:a,displayName:e.platform.controllers.getName(r)}},saveConfiguration:function(e,n,t,o){var r=o.controllerRef,i=o.config;return(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.platform.controllers.settings.set(r,i)}))},setDisplayName:function(e,n,t,o){var r=o.controllerRef,i=o.name;return(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.platform.controllers.setName(r,i)}))},setState:function(e,n,t,o){var r=o.state;return(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.platform.controllers.setState(r)}))},setExternalId:function(e,n,t,o){var r=o.controllerRef,i=o.externalId;return(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.platform.controllers.settings.setExternalId(r,i)}))},getExternalId:function(e,n,t,o){var r=o.controllerRef;return e.platform.controllers.settings.getExternalId(r)}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={getFontsOptions:function(e){return e.fonts.getFontsOptions()}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={add:function(e,n,t,o){var r=o.label;return new Promise((function(n){return e.waitForChangesApplied((function(){e.history.add(r),n()}))}))}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,r=t(1),i=(o=r)&&o.__esModule?o:{default:o};n.default={getSiteId:function(e){return e.generalInfo.getSiteId()},getMetaSiteId:function(e){return e.generalInfo.getMetaSiteId()},getPublicUrl:function(e){return e.generalInfo.getPublicUrl()},isSitePublished:function(e){return e.generalInfo.isSitePublished()},getLanguage:function(e){return e.generalInfo.getLanguage()},getRegionalLanguage:function(e){return e.generalInfo.getRegionalLanguage()},isSiteSaved:function(e){return!e.generalInfo.isFirstSave()},isHttpsEnabled:function(e){return e.generalInfo.isHttpsEnabled()},getAppInstance:function(e,n){var t="wix-code"===n.appDefinitionId?e.wixCode.getClientSpec().applicationId:n.applicationId;return e.tpa.app.getData(t).instance},getAppInstanceId:function(e,n){var t="wix-code"===n.appDefinitionId?e.wixCode.getClientSpec().applicationId:n.applicationId;return e.tpa.app.getData(t).instanceId},getCurrency:function(e){return e.generalInfo.getCurrency()},getUserId:function(e){return e.generalInfo.getUserInfo().userId},getUserInfo:function(e){return e.generalInfo.getUserInfo()},getVendorProductId:function(e,n,t,o){var r=i.default.get(o,"appDefinitionId"),a=r?e.platform.getAppDataByAppDefId(r):e.platform.getAppDataByApplicationId(n.applicationId);return i.default.get(a,"vendorProductId")},getRegion:function(e){return e.generalInfo.getLocale()},getArtifactsUrls:function(e,n,t){return e.generalInfo.getArtifactsUrl(t)}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t(0);n.default={add:function(e,n,t,r){var i=r.languageCode;return(0,o.runInContext)(n.appDefinitionId,e,(function(){return e.language.add(i)})),(0,o.promiseApplied)(e)},current:{set:function(e,n,t,r){var i=r.languageCode;return(0,o.runInContext)(n.appDefinitionId,e,(function(){return e.language.current.set(i)})),(0,o.promiseApplied)(e)}}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,r=t(1),i=(o=r)&&o.__esModule?o:{default:o},a=t(0);n.default={create:function(e,n,t,o){var r=o.menuData,p=o.customId,u=i.default.assign({appId:n.applicationId},r);return(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.menu.create(u,p)}))},connect:function(e,n,t,o){var r=o.menuCompPointer,i=o.menuId;(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.menu.connect(r,i)}))},update:function(e,n,t,o){var r=o.menuId,i=o.menuData;(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.menu.update(r,i)}))},remove:function(e,n,t,o){var r=o.menuId;(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.menu.remove(r)}))},addItem:function(e,n,t,o){var r=o.menuId,i=o.menuItem;(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.menu.addItem(r,i)}))},getById:function(e,n,t,o){var r=o.menuId;return e.menu.getById(r)}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t(2),r=t(15),i=t(0);function a(e,n,t,o){var r=o.pageRef;return e.pages.data.get(r.id)}n.default={navigateTo:o.navigateTo,setState:function(e,n,t,o){var r=o.state;(0,i.runInContext)(n.appDefinitionId,e,(function(){return e.platform.pages.setState(r)}))},getCurrent:function(e){return e.pages.getReference(e.pages.getFocusedPageId())},getPrimary:function(e){return e.pages.getReference(e.pages.getPrimaryPageId())},getHomePage:function(e){var n=e.homePage.get();return e.components.get.byId(n)},add:function(e,n,t,r){var a=r.title,p=r.definition,u=r.shouldAddMenuItem,f=(0,i.runInContext)(n.appDefinitionId,e,(function(){return e.pages.add(a,p,u)}));return(0,o.navigateTo)(e,n,t,{pageRef:f},f)},getPageData:a,rename:function(e,n,t,o){var r=o.pageRef,a=o.title;return(0,i.runInContext)(n.appDefinitionId,e,(function(){return e.pages.data.update(r.id,{title:a})}))},data:{get:a,getAll:function(e){return e.pages.getPagesData()},update:function(e,n,t,o){var r=o.pageRef,a=o.data;(0,i.runInContext)(n.appDefinitionId,e,(function(){return e.pages.data.update(r.id,a)}))}},pageUriSEO:{convertPageNameToUrl:function(e,n,t,o){var r=o.title;return e.pages.data.pageUriSEO.convertPageNameToUrl(r)}},serialize:function(e,n,t,o){var r=o.pageRef,i=o.maintainIdentifiers,a=void 0!==i&&i;return e.pages.serialize(r.id,a)},permissions:{hasPassword:function(e,n,t,o){var r=o.pageRef;return e.pages.permissions.hasPassword(r.id)},updatePagePassword:function(e,n,t,o){var r=o.pageRef,a=o.plainPassword;(0,i.runInContext)(n.appDefinitionId,e,(function(){return e.pages.permissions.updatePassword(r.id,a)}))},removePagePassword:function(e,n,t,o){var r=o.pageRef;(0,i.runInContext)(n.appDefinitionId,e,(function(){return e.pages.permissions.removePassword(r.id)}))},duplicatePagePassword:function(e,n,t,o){var r=o.destinationPageRef,a=o.sourcePageRef;return new Promise((function(t,o){(0,i.runInContext)(n.appDefinitionId,e,(function(){return e.pages.permissions.duplicatePagePassword(r.id,a.id,t,o)}))}))},duplicateGroupsPermissions:function(){return new Promise((function(e){e()}))}},remove:function(e,n,t,o){var r=o.pageRef;return new Promise((function(t,o){var a=e.pages.data.get(r.id);a||o("page with id '"+r.id+"' doesn't exist"),n.appDefinitionId!==a.managingAppDefId&&o("page with id '"+r.id+"' can not be deleted. page is not managed by this application"),e.pages.getCurrentPage().id===r.id&&o("It is not allowed to delete current page ("+r.id+"), please navigate to another page");var p=e.homePage.get();r.id===p&&o("It is not allowed to delete homePage ("+r.id+"), please set a new page as homePage and try again"),a.tpaApplicationId&&o("It is not allowed to delete a section page '("+r.id+")'");try{(0,i.runInContext)(n.appDefinitionId,e,(function(){return e.pages.remove(r.id)}))}catch(e){o(e)}t()}))},getApplicationPages:function(e,n){var t=n.appDefinitionId;return t?e.pages.getPagesData().filter((function(e){return e.managingAppDefId===t})):[]},popupPages:{add:r.addPopup,open:r.open,close:r.close,isPopupOpened:r.isPopupOpened,getApplicationPopups:r.getApplicationPopups}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getApplicationPopups=n.isPopupOpened=n.close=n.open=n.addPopup=void 0;var o,r=t(2),i=t(1),a=(o=i)&&o.__esModule?o:{default:o},p=t(0);n.addPopup=function(e,n,t,o){var i=o.title,a=o.definition,u=(0,p.runInContext)(n.appDefinitionId,e,(function(){return e.pages.popupPages.add(i,a)}));return(0,r.navigateTo)(e,n,t,{pageRef:u},u)},n.open=function(e,n,t,o){var r=o.popupRef,i=a.default.get(r,"id");i&&(0,p.runInContext)(n.appDefinitionId,e,(function(){return e.pages.popupPages.open(i)}))},n.close=function(e,n){(0,p.runInContext)(n.appDefinitionId,e,(function(){return e.pages.popupPages.close()}))},n.isPopupOpened=function(e){return e.pages.popupPages.isPopupOpened()},n.getApplicationPopups=function(e,n){var t=n.appDefinitionId;return t?e.pages.popupPages.getDataList().filter((function(e){return e.managingAppDefId===t})):[]}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t(0);n.default={create:function(e,n,t,r){var i=r.groupName,a=(0,o.runInContext)(n.appDefinitionId,e,(function(){return e.pagesGroup.create({groupName:i,appId:n.applicationId})}));return Promise.resolve(a)},addPageToPagesGroup:function(e,n,t,r){var i=r.pagesGroupPointer,a=r.pageId;(0,o.runInContext)(n.appDefinitionId,e,(function(){return e.pagesGroup.addPageToPagesGroup(i,a)}))},getById:function(e,n,t,o){var r=o.pagesGroupId;return e.pagesGroup.getById(r)},getByGroupName:function(e,n,t,o){var r=o.groupName;return e.pagesGroup.getByGroupName(r)},getAll:function(e,n){return e.pagesGroup.getAll(n.applicationId)},remove:function(e,n,t,r){var i=r.pagesGroupPointer;(0,o.runInContext)(n.appDefinitionId,e,(function(){return e.pagesGroup.remove(i)}))}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,r=t(1),i=(o=r)&&o.__esModule?o:{default:o},a=t(0);function p(e,n,t,o){var r=o.routerRef,a=e.routers.get.byRef(r);if(a&&n.appDefinitionId===a.appDefinitionId)return{id:a.id,prefix:a.prefix,config:a.config,pages:(0,i.default)(a.pages).invertBy().map((function(n,t){return{pageRef:e.pages.getReference(t),pageRoles:n}})).value()}}function u(e,n,t,o){var r=o.prefix,i=n.appDefinitionId,a=e.routers.getRouterRef.byPrefix(r);if(!a)return a;var p=e.routers.get.byRef(a);return p&&p.appDefinitionId===i?a:void 0}n.default={add:function(e,n,t){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=o.prefix,i=o.config,p=o.group;return new Promise((function(t){var o={appDefinitionId:n.appDefinitionId,prefix:r,config:i};p&&(o.group=p),t((0,a.runInContext)(n.appDefinitionId,e,(function(){return e.routers.add(o)})))}))},remove:function(e,n,t,o){var r=o.routerRef,i=e.routers.get.byRef(r);i&&i.appDefinitionId===n.appDefinitionId&&(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.routers.remove(r)}))},get:p,getAll:function(e,n,t){var o=n.appDefinitionId;return i.default.map(e.routers.get.byApp(o),(function(o){var r=o.prefix,i=u(e,n,t,{prefix:r});return p(e,n,0,{routerRef:i})}))},update:function(e,n,t,o){var r=o.routerRef,i=o.prefix,p=o.config,u=e.routers.get.byRef(r);u&&u.appDefinitionId===n.appDefinitionId&&(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.routers.update(r,{prefix:i,config:p})}))},getByPage:function(e,n,t,o){var r=o.pageRef,i=n.appDefinitionId,a=e.routers.getRouterRef.byPage(r);if(!a)return a;var p=e.routers.get.byRef(a);return p&&p.appDefinitionId===i?a:void 0},getByPrefix:u,isValidPrefix:function(e,n,t,o){var r=o.prefix;return e.routers.isValidPrefix(n.applicationId,r)},pages:{add:function(e,n,t,o){var r=o.routerRef,i=o.pageTitle,p=o.pageRoles;return new Promise((function(t){var o=e.routers.get.byRef(r);o&&o.appDefinitionId===n.appDefinitionId||t(),t((0,a.runInContext)(n.appDefinitionId,e,(function(){return e.routers.pages.add(r,i,p)})))}))},delete:function(e,n,t,o){var r=o.routerRef,i=o.pageRef;return new Promise((function(t,o){var p=e.routers.get.byRef(r);p&&p.appDefinitionId===n.appDefinitionId?((0,a.runInContext)(n.appDefinitionId,e,(function(){return e.pages.remove(i.id)})),t()):o()}))},connect:function(e,n,t,o){var r=o.routerRef,i=o.pageRef,p=o.pageRoles,u=e.routers.get.byRef(r);u&&u.appDefinitionId===n.appDefinitionId&&(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.routers.pages.connect(r,i,p)}))},disconnect:function(e,n,t,o){var r=o.routerRef,i=o.pageRef,p=n.appDefinitionId,u=e.routers.get.byRef(r);u&&u.appDefinitionId===p&&(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.routers.pages.disconnect(r,i)}))},move:function(e,n,t,o){var r=o.fromRouterRef,i=o.toRouterRef,p=o.pageRef,u=n.appDefinitionId,f=e.routers.get.byRef(r),s=e.routers.get.byRef(i);f&&s&&s.appDefinitionId===u&&f.appDefinitionId===u&&(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.routers.pages.move(p,r,i)}))},listConnectablePages:function(e){return e.routers.pages.listConnectablePages()}}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={getFooter:function(e){return e.siteSegments.getFooter()},getHeader:function(e){return e.siteSegments.getHeader()},getPagesContainer:function(e){return e.siteSegments.getPagesContainer()},getSiteStructure:function(e){return e.siteSegments.getSiteStructure()}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={getCustomNoPermissionsPageId:function(e){return e.siteMembers.getCustomNoPermissionsPageId()},setCustomNoPermissionsPageId:function(e,n,t,o){return e.siteMembers.setCustomNoPermissionsPageId(o)}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={colors:{getAll:function(e){return e.theme.colors.getAll()}},fonts:{getMap:function(e){return e.theme.fonts.getMap()}}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,r=t(1),i=(o=r)&&o.__esModule?o:{default:o},a=t(0);function p(e,n,t,o){return new Promise((function(t,r){var p=i.default.clone(o);i.default.get(o,"appDefinitionId")?e.tpa.app.isInstalled(o.appDefinitionId)?r(new Error("Application already installed.")):e.tpa.appMarket.getDataAsync(o.appDefinitionId).then((function(u){u&&!u.error?"Wix"===u.by?(p.callback=function(a){if(a.onError)r(new Error(a.onError));else if(n=e.tpa.app.getDataByAppDefId(o.appDefinitionId),a.page){var p=e.pages.data.get(a.page.id);t({instanceId:i.default.get(n,"instanceId"),pageRef:a.page,pageUriSEO:i.default.get(p,"pageUriSEO"),title:i.default.get(p,"title")})}else t({instanceId:i.default.get(n,"instanceId")})},(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.tpa.app.add(o.appDefinitionId,p)}))):r(new Error("Can't add a non Wix application")):r(new Error("Application with "+o.appDefinitionId+" appDefinitionId do not exist."))})):r(new Error("options must contain appDefinitionId"))}))}n.default={isAppSectionInstalled:function(e,n,t){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=o.sectionId,a=o.appDefinitionId;return new Promise((function(t,o){if(r){var p=n.applicationId;if(a){var u=e.tpa.app.getDataByAppDefId(a);p=i.default.get(u,"applicationId")}t(e.tpa.section.isSectionInstalledByTpaPageId(p,r))}else o(new Error("options must contain sectionId"))}))},isApplicationInstalled:function(e,n,t){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=o.appDefinitionId;return new Promise((function(n,t){r?n(e.tpa.app.isInstalled(r)):t(new Error("options must contain appDefinitionId"))}))},setStyleParams:function(e,n,t,o){return new Promise((function(t,r){if(o&&o.compRef)if(o&&o.styleParams&&i.default.isArray(o.styleParams)){var p=(e.components.data.get(o.compRef)||{}).appDefinitionId;p?p===n.appDefinitionId?(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.tpa.style.setStyleParam(o.compRef.id,o.styleParams,(function(){return t()}))})):r("It is not allowed to set style params for other applications, application "+n.appDefinitionId+" cannot set applications "+p+" components style params"):r("could not find component data for the given component ref")}else r("options must include styleParams property and styleParams must be an array");else r("options must include compRef property")}))},getStyleParams:function(e,n,t,o){return new Promise((function(t,r){if(o&&o.compRef){var i=(e.components.data.get(o.compRef)||{}).appDefinitionId;if(i)if(i===n.appDefinitionId)t((e.tpa.style.get(o.compRef.id)||{}).style);else r("It is not allowed to get the style params from other applications, application "+n.appDefinitionId+" cannot get applications "+i+" components style params");else r("could not find component data for the given component ref")}else r("options must include compRef property")}))},add:{application:p,component:function(e,n,t,o){return new Promise((function(t,r){var p=i.default.clone(o);if(i.default.get(o,"componentType")){if(o.appDefinitionId||(p.appDefinitionId=n.appDefinitionId),"WIDGET"===o.componentType){if(!i.default.isObject(o.widget))return void r(new Error("options must contain a widget object"));p.widget.tpaWidgetId=o.widget.widgetId}else if("PAGE"===o.componentType){if(!i.default.isObject(o.page))return void r(new Error("options must contain a page object"));if(o.page.isHidden&&!i.default.isBoolean(o.page.isHidden))return void r(new Error("isHidden param should be of type boolean"))}p.callback=function(n){if(n.onError)r(new Error(n.onError));else if("WIDGET"===o.componentType)t({compId:n.comp.id});else{var a=e.pages.data.get(n.page.id);t({compId:n.sectionId,pageRef:n.page,pageUriSEO:i.default.get(a,"pageUriSEO"),title:i.default.get(a,"title")})}},(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.tpa.comp.add(p)}))}else r(new Error("options must contain componentType"))}))}},app:{getDataByAppDefId:function(e,n,t,o){return e.tpa.app.getDataByAppDefId(o)},getAllCompsByApplicationId:function(e,n,t,o){return e.tpa.app.getAllCompsByApplicationId(o)},refreshApp:function(e,n){var t=e.tpa.app.getAllCompsByApplicationId(n.applicationId);return(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.tpa.app.refreshApp(t)}))},delete:function(e,n){return new Promise((function(t){(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.tpa.app.delete(n.applicationId)})),e.waitForChangesApplied(t)}))},add:p}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,r=t(1),i=(o=r)&&o.__esModule?o:{default:o},a=t(0);function p(e){return{name:e.name,fullPath:e.location,isDirectory:e.directory}}n.default={listChildren:function(e,n,t,o){var r=e.wixCode.fileSystem,a=r.getVirtualDescriptor(o.path,!0);return r.getChildren(a).then((function(e){return i.default.map(e,p)}))},readFile:function(e,n,t,o){var r=e.wixCode.fileSystem,i=r.getVirtualDescriptor(o.path,!1);return r.readFile(i)},writeFile:function(e,n,t,o){var r=e.wixCode.fileSystem,i=r.getVirtualDescriptor(o.path,!1);return(0,a.runInContext)(n.appDefinitionId,e,(function(){return r.writeFile(i,o.content)}))},deleteFile:function(e,n,t,o){var r=e.wixCode.fileSystem,i=r.getVirtualDescriptor(o.path,!1);return(0,a.runInContext)(n.appDefinitionId,e,(function(){return r.deleteItem(i)}))},flush:function(e,n){return(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.wixCode.fileSystem.flush()}))},getViewerInfo:function(e){return e.wixCode.fileSystem.getViewerInfo()}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t(0);n.default={hiddenComponents:{show:function(e,n,t,r){var i=r.componentRef,a=e.pages.getFocusedPageId();(0,o.runInContext)(n.appDefinitionId,e,(function(){return e.mobile.hiddenComponents.show(i.id,a)}))}}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const o=t(0);n.default={get:function(e,n,t,{componentRef:o}){return e.responsiveLayout.get(o)},update:function(e,n,t,{componentRef:r,responsiveLayout:i}){o.runInContext(n.appDefinitionId,e,()=>e.responsiveLayout.update(r,i))}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t(0);n.default={getVisualFocus:function(e){return e.accessibility.visualFocus.get()},setVisualFocus:function(e,n,t,r){return(0,o.runInContext)(n.appDefinitionId,e,(function(){return e.accessibility.visualFocus.set(r)}))},getAutoDomReorder:function(e){return e.accessibility.autoDomReorder.get()},setAutoDomReorder:function(e,n,t,r){return(0,o.runInContext)(n.appDefinitionId,e,(function(){return e.accessibility.autoDomReorder.set(r)}))}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={isCoBranded:function(e){return e.account.isCoBranded()}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t(28);n.default={registerToErrorThrownForContext:function(e,n){var t=o.REGISTER_ERROR+n.appDefinitionId;e.platform.requestAPIFromWorker(t).then((function(t){var o=t.callback;return e.registerToErrorThrownForContext(n.appDefinitionId,o)}))},unRegisterToErrorThrownForContext:function(e,n){var t=o.REGISTER_ERROR+n.appDefinitionId;e.platform.requestAPIFromWorker(t).then((function(t){var o=t.callback;return e.unRegisterToErrorThrownForContext(n.appDefinitionId,o)}))}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.REGISTER_ERROR="registerError_"}])}));
//# sourceMappingURL=platform-api.min.js.map